{"componentChunkName":"component---src-templates-blog-post-js","path":"/Study/Android/kotlin_09_camera/","result":{"data":{"site":{"siteMetadata":{"title":"SangMin 개발 이야기","author":"SangMin","siteUrl":"https://sangmin802.github.io","comment":{"disqusShortName":"","utterances":"sangmin802/sangmin802.github.io"},"sponsor":{"buyMeACoffeeId":"jbee"}}},"markdownRemark":{"id":"0c94161d-2e12-53d6-8636-27aaa8245e2c","excerpt":"Camera 안드로이드 기본 카메라 기능을 앱에서 사용할 수 있다. 개인적으로.. 자바 기본문법을 모르다보니 너무 어려웠다..특히 중간중간에 같은 구문이 있던데.. 잠깐 알아보니 의 속성들을 조금 더 쉽게 변경할 수 있는 문법인것같다!.. 공부해야할듯 결과물 참조 홍스로이드 Kotlin Camera","html":"<h2 id=\"camera\" style=\"position:relative;\"><a href=\"#camera\" aria-label=\"camera permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Camera</h2>\n<ul>\n<li>\n<p>안드로이드 기본 카메라 기능을 앱에서 사용할 수 있다.</p>\n<blockquote>\n<p>개인적으로.. 자바 기본문법을 모르다보니 너무 어려웠다..특히 중간중간에 <code class=\"language-text\">also</code>같은 구문이 있던데.. 잠깐 알아보니 <code class=\"language-text\">class</code>의 속성들을 조금 더 쉽게 변경할 수 있는 문법인것같다!.. 공부해야할듯</p>\n</blockquote>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// Manifest.xml</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">?</span>xml version<span class=\"token operator\">=</span><span class=\"token string\">\"1.0\"</span> encoding<span class=\"token operator\">=</span><span class=\"token string\">\"utf-8\"</span><span class=\"token operator\">?</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>manifest xmlns<span class=\"token operator\">:</span>android<span class=\"token operator\">=</span><span class=\"token string\">\"http://schemas.android.com/apk/res/android\"</span>\n    <span class=\"token keyword\">package</span><span class=\"token operator\">=</span><span class=\"token string\">\"com.example.camera\"</span><span class=\"token operator\">></span>\n\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span>  카메라 권한  <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>uses<span class=\"token operator\">-</span>permission android<span class=\"token operator\">:</span>name<span class=\"token operator\">=</span><span class=\"token string\">\"android.permission.CAMERA\"</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span>  파일 쓰기 권한  <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>uses<span class=\"token operator\">-</span>permission android<span class=\"token operator\">:</span>name<span class=\"token operator\">=</span><span class=\"token string\">\"android.permission.WRITE_EXTERNAL_STORAGE\"</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span>  파일 저장 권한  <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>uses<span class=\"token operator\">-</span>permission android<span class=\"token operator\">:</span>name<span class=\"token operator\">=</span><span class=\"token string\">\"android.permission.READ_EXTERNAL_STORAGE\"</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span>  카메라 기능 사용  <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>uses<span class=\"token operator\">-</span>feature android<span class=\"token operator\">:</span>name<span class=\"token operator\">=</span><span class=\"token string\">\"android.hardware.camera\"</span> android<span class=\"token operator\">:</span>required<span class=\"token operator\">=</span><span class=\"token string\">\"true\"</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span>  <span class=\"token boolean\">true</span> <span class=\"token operator\">:</span> 카메라 기능이 없는 안드로이드일 경우<span class=\"token punctuation\">,</span> 에러가 생김  <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span>  <span class=\"token boolean\">false</span> <span class=\"token operator\">:</span> 카메라 기능이 없어도 정상적으로 작동됨  <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n\n    <span class=\"token operator\">&lt;</span>application\n        android<span class=\"token operator\">:</span>allowBackup<span class=\"token operator\">=</span><span class=\"token string\">\"true\"</span>\n        android<span class=\"token operator\">:</span>icon<span class=\"token operator\">=</span><span class=\"token string\">\"@mipmap/ic_launcher\"</span>\n        android<span class=\"token operator\">:</span>label<span class=\"token operator\">=</span><span class=\"token string\">\"@string/app_name\"</span>\n        android<span class=\"token operator\">:</span>roundIcon<span class=\"token operator\">=</span><span class=\"token string\">\"@mipmap/ic_launcher_round\"</span>\n        android<span class=\"token operator\">:</span>supportsRtl<span class=\"token operator\">=</span><span class=\"token string\">\"true\"</span>\n        android<span class=\"token operator\">:</span>theme<span class=\"token operator\">=</span><span class=\"token string\">\"@style/AppTheme\"</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>activity android<span class=\"token operator\">:</span>name<span class=\"token operator\">=</span><span class=\"token string\">\".MainActivity\"</span><span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>intent<span class=\"token operator\">-</span>filter<span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span>action android<span class=\"token operator\">:</span>name<span class=\"token operator\">=</span><span class=\"token string\">\"android.intent.action.MAIN\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n\n                <span class=\"token operator\">&lt;</span>category android<span class=\"token operator\">:</span>name<span class=\"token operator\">=</span><span class=\"token string\">\"android.intent.category.LAUNCHER\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>intent<span class=\"token operator\">-</span>filter<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>activity<span class=\"token operator\">></span>\n\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span>  보안을 위해 사진 제공자<span class=\"token punctuation\">,</span> 사용하는 앱에 대한 명시  <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>provider\n            android<span class=\"token operator\">:</span>authorities<span class=\"token operator\">=</span><span class=\"token string\">\"com.example.camera.fileprovider\"</span>\n            android<span class=\"token operator\">:</span>name<span class=\"token operator\">=</span><span class=\"token string\">\"androidx.core.content.FileProvider\"</span>\n            android<span class=\"token operator\">:</span>exported<span class=\"token operator\">=</span><span class=\"token string\">\"false\"</span>\n            android<span class=\"token operator\">:</span>grantUriPermissions<span class=\"token operator\">=</span><span class=\"token string\">\"true\"</span><span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>meta<span class=\"token operator\">-</span>data android<span class=\"token operator\">:</span>name<span class=\"token operator\">=</span><span class=\"token string\">\"android.support.FILE_PROVIDER_PATHS\"</span>\n                android<span class=\"token operator\">:</span>resource<span class=\"token operator\">=</span><span class=\"token string\">\"@xml/file_paths\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>provider<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>application<span class=\"token operator\">></span>\n\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>manifest<span class=\"token operator\">></span>\n\n<span class=\"token comment\">// MainActivity.kt</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MainActivity</span> <span class=\"token operator\">:</span> <span class=\"token function\">AppCompatActivity</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    val <span class=\"token constant\">REQUEST_IMAGE_CAPTURE</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span> <span class=\"token comment\">// 카메라 사진촬영 요청코드</span>\n    lateinit <span class=\"token keyword\">var</span> curPhotoPath <span class=\"token operator\">:</span> String <span class=\"token comment\">// 그냥 미리 선언해놓는 문자열 형태의 사진 경로</span>\n\n    override fun <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">savedInstanceState<span class=\"token operator\">:</span> Bundle<span class=\"token operator\">?</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span><span class=\"token constant\">R</span><span class=\"token punctuation\">.</span>layout<span class=\"token punctuation\">.</span>activity_main<span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\">// mainfests에 필요한 권한들을 요청한다</span>\n        <span class=\"token comment\">// 단, 안드로이드 공문에 기재된 몇몇의 권한들은 개인정보와 관련된 위험권한으로 사용자에게 허락을 받아야 한다.</span>\n        <span class=\"token comment\">// 허락 팝업을 위해 gradle에 추가를 한다.</span>\n        <span class=\"token comment\">//      implementation 'gun0912.ted:tedpermission:2.2.3'</span>\n        <span class=\"token function\">setPermission</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 권한 체크 메소드 수행</span>\n\n        btn_camera<span class=\"token punctuation\">.</span>setOnClickListener <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">takeCapture</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 사진 촬영</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// 권한 요청 팝업 설정</span>\n    <span class=\"token keyword\">private</span> fun <span class=\"token function\">setPermission</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        val permission <span class=\"token operator\">=</span> object <span class=\"token operator\">:</span> PermissionListener <span class=\"token punctuation\">{</span>\n            override fun <span class=\"token function\">onPermissionGranted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// 설정해놓은 위험권한들이 모두 허용 되었을 경우 실행</span>\n                Toast<span class=\"token punctuation\">.</span><span class=\"token function\">makeText</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span>@MainActivity<span class=\"token punctuation\">,</span> <span class=\"token string\">\"권한이 허용 되었습니다.\"</span><span class=\"token punctuation\">,</span> Toast<span class=\"token punctuation\">.</span><span class=\"token constant\">LENGTH_SHORT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span>\n\n            override fun <span class=\"token function\">onPermissionDenied</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">deniedPermissions<span class=\"token operator\">:</span> MutableList<span class=\"token operator\">&lt;</span>String<span class=\"token operator\">></span><span class=\"token operator\">?</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// 설정해놓은 위험권한들이 하나라도 거부되었을 경우 실행</span>\n                Toast<span class=\"token punctuation\">.</span><span class=\"token function\">makeText</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span>@MainActivity<span class=\"token punctuation\">,</span> <span class=\"token string\">\"권한이 거부 되었습니다.\"</span><span class=\"token punctuation\">,</span> Toast<span class=\"token punctuation\">.</span><span class=\"token constant\">LENGTH_SHORT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n\n        TedPermission<span class=\"token punctuation\">.</span><span class=\"token function\">with</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">setPermissionListener</span><span class=\"token punctuation\">(</span>permission<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">setRationaleMessage</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"카메라 앱을 사용하시려면 권한을 허용해주세요.\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">setDeniedMessage</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"권한을 거부하셨습니다. [앱 실행] -> [권한] 항목에서 허용해주세요.\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">setPermissions</span><span class=\"token punctuation\">(</span>android<span class=\"token punctuation\">.</span>Manifest<span class=\"token punctuation\">.</span>permission<span class=\"token punctuation\">.</span><span class=\"token constant\">WRITE_EXTERNAL_STORAGE</span><span class=\"token punctuation\">,</span> android<span class=\"token punctuation\">.</span>Manifest<span class=\"token punctuation\">.</span>permission<span class=\"token punctuation\">.</span><span class=\"token constant\">CAMERA</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">check</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// 사진 촬영</span>\n    <span class=\"token keyword\">private</span> fun <span class=\"token function\">takeCapture</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 기본 카메라 앱 실행</span>\n    <span class=\"token comment\">// 카메라 기능도 Activity 형태이기 때문에, Intent로 화면전환을 사용한다.</span>\n        <span class=\"token function\">Intent</span><span class=\"token punctuation\">(</span>MediaStore<span class=\"token punctuation\">.</span><span class=\"token constant\">ACTION_IMAGE_CAPTURE</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>also <span class=\"token punctuation\">{</span> takePictureIntent <span class=\"token operator\">-</span><span class=\"token operator\">></span>\n            takePictureIntent<span class=\"token punctuation\">.</span><span class=\"token function\">resolveActivity</span><span class=\"token punctuation\">(</span>packageManager<span class=\"token punctuation\">)</span><span class=\"token operator\">?.</span>also <span class=\"token punctuation\">{</span>\n                val photoFile <span class=\"token operator\">:</span> File<span class=\"token operator\">?</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token function\">createImageFile</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>ex <span class=\"token operator\">:</span> IOException<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token keyword\">null</span>\n                <span class=\"token punctuation\">}</span>\n                photoFile<span class=\"token operator\">?.</span>also <span class=\"token punctuation\">{</span>\n                    val photoURI <span class=\"token operator\">:</span> Uri <span class=\"token operator\">=</span> FileProvider<span class=\"token punctuation\">.</span><span class=\"token function\">getUriForFile</span><span class=\"token punctuation\">(</span>\n                        <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span>\n                        <span class=\"token string\">\"com.example.camera.fileprovider\"</span><span class=\"token punctuation\">,</span>\n                        it\n                    <span class=\"token punctuation\">)</span>\n                    takePictureIntent<span class=\"token punctuation\">.</span><span class=\"token function\">putExtra</span><span class=\"token punctuation\">(</span>MediaStore<span class=\"token punctuation\">.</span><span class=\"token constant\">EXTRA_OUTPUT</span><span class=\"token punctuation\">,</span> photoURI<span class=\"token punctuation\">)</span>\n                    <span class=\"token comment\">// startActivity만 있으면, 단순히 카메라 Activity로 이동만 하지만</span>\n                    <span class=\"token comment\">// startActivityForResult를 쓰면, 갔다가 결과값을 받고 돌아온다</span>\n                    <span class=\"token function\">startActivityForResult</span><span class=\"token punctuation\">(</span>takePictureIntent<span class=\"token punctuation\">,</span> <span class=\"token constant\">REQUEST_IMAGE_CAPTURE</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// 이미지 파일 생성</span>\n    <span class=\"token keyword\">private</span> fun <span class=\"token function\">createImageFile</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> File <span class=\"token punctuation\">{</span>\n        val timestamp <span class=\"token operator\">:</span> String <span class=\"token operator\">=</span> <span class=\"token function\">SimpleDateFormat</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"yyyyMMdd_HHmmss\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token function\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        val storageDir <span class=\"token operator\">:</span> File<span class=\"token operator\">?</span> <span class=\"token operator\">=</span> <span class=\"token function\">getExternalFilesDir</span><span class=\"token punctuation\">(</span>Environment<span class=\"token punctuation\">.</span><span class=\"token constant\">DIRECTORY_PICTURES</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> File<span class=\"token punctuation\">.</span><span class=\"token function\">createTempFile</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"JPEG_${timestamp}_\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\".jpg\"</span><span class=\"token punctuation\">,</span> storageDir<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span>apply <span class=\"token punctuation\">{</span> curPhotoPath <span class=\"token operator\">=</span> absolutePath <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// startActivityForResult를 사용해서 받아온 사진 결과값.</span>\n    override fun <span class=\"token function\">onActivityResult</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">requestCode<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">,</span> resultCode<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">,</span> data<span class=\"token operator\">:</span> Intent<span class=\"token operator\">?</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onActivityResult</span><span class=\"token punctuation\">(</span>requestCode<span class=\"token punctuation\">,</span> resultCode<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\">// 이미지를 성공적으로 가져 왔다면</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>requestCode <span class=\"token operator\">===</span> <span class=\"token constant\">REQUEST_IMAGE_CAPTURE</span> <span class=\"token operator\">&amp;&amp;</span> resultCode <span class=\"token operator\">===</span> Activity<span class=\"token punctuation\">.</span><span class=\"token constant\">RESULT_OK</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            val bitmap <span class=\"token operator\">:</span> Bitmap\n            val file <span class=\"token operator\">=</span> <span class=\"token function\">File</span><span class=\"token punctuation\">(</span>curPhotoPath<span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>Build<span class=\"token punctuation\">.</span><span class=\"token constant\">VERSION</span><span class=\"token punctuation\">.</span><span class=\"token constant\">SDK_INT</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">28</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// 안드로이드 9.0버전보다 낮을경우</span>\n                bitmap <span class=\"token operator\">=</span> MediaStore<span class=\"token punctuation\">.</span>Images<span class=\"token punctuation\">.</span>Media<span class=\"token punctuation\">.</span><span class=\"token function\">getBitmap</span><span class=\"token punctuation\">(</span>contentResolver<span class=\"token punctuation\">,</span> Uri<span class=\"token punctuation\">.</span><span class=\"token function\">fromFile</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                iv_profile<span class=\"token punctuation\">.</span><span class=\"token function\">setImageBitmap</span><span class=\"token punctuation\">(</span>bitmap<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{</span>\n                val decode <span class=\"token operator\">=</span> ImageDecoder<span class=\"token punctuation\">.</span><span class=\"token function\">createSource</span><span class=\"token punctuation\">(</span>\n                    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>contentResolver<span class=\"token punctuation\">,</span>\n                    Uri<span class=\"token punctuation\">.</span><span class=\"token function\">fromFile</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">)</span>\n                bitmap <span class=\"token operator\">=</span> ImageDecoder<span class=\"token punctuation\">.</span><span class=\"token function\">decodeBitmap</span><span class=\"token punctuation\">(</span>decode<span class=\"token punctuation\">)</span>\n                iv_profile<span class=\"token punctuation\">.</span><span class=\"token function\">setImageBitmap</span><span class=\"token punctuation\">(</span>bitmap<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token function\">savePhoto</span><span class=\"token punctuation\">(</span>bitmap<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// 갤러리에 저장</span>\n    <span class=\"token keyword\">private</span> fun <span class=\"token function\">savePhoto</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">bitmap<span class=\"token operator\">:</span> Bitmap</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// 사진폴더에 저장하기 위한 경로</span>\n        val folderPath <span class=\"token operator\">=</span> Environment<span class=\"token punctuation\">.</span><span class=\"token function\">getExternalStorageDirectory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>absolutePath <span class=\"token operator\">+</span> <span class=\"token string\">\"/Pictures/\"</span>\n        val timestamp <span class=\"token operator\">:</span> String <span class=\"token operator\">=</span> <span class=\"token function\">SimpleDateFormat</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"yyyyMMdd_HHmmss\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token function\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        val fileName <span class=\"token operator\">=</span> <span class=\"token string\">\"${timestamp}.jpeg\"</span>\n        val folder <span class=\"token operator\">=</span> <span class=\"token function\">File</span><span class=\"token punctuation\">(</span>folderPath<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>folder<span class=\"token punctuation\">.</span>isDirectory<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// 해당 경로에 폴더가 존재하지 않는다면</span>\n            folder<span class=\"token punctuation\">.</span><span class=\"token function\">mkdirs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// 저장저리</span>\n        val out <span class=\"token operator\">=</span> <span class=\"token function\">FileOutputStream</span><span class=\"token punctuation\">(</span>folderPath <span class=\"token operator\">+</span> fileName<span class=\"token punctuation\">)</span>\n        bitmap<span class=\"token punctuation\">.</span><span class=\"token function\">compress</span><span class=\"token punctuation\">(</span>Bitmap<span class=\"token punctuation\">.</span>CompressFormat<span class=\"token punctuation\">.</span><span class=\"token constant\">JPEG</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> out<span class=\"token punctuation\">)</span>\n        Toast<span class=\"token punctuation\">.</span><span class=\"token function\">makeText</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"사진이 저장되었습니다.\"</span><span class=\"token punctuation\">,</span> Toast<span class=\"token punctuation\">.</span><span class=\"token constant\">LENGTH_SHORT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// activity_main.xml</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">?</span>xml version<span class=\"token operator\">=</span><span class=\"token string\">\"1.0\"</span> encoding<span class=\"token operator\">=</span><span class=\"token string\">\"utf-8\"</span><span class=\"token operator\">?</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span>androidx<span class=\"token punctuation\">.</span>constraintlayout<span class=\"token punctuation\">.</span>widget<span class=\"token punctuation\">.</span>ConstraintLayout xmlns<span class=\"token operator\">:</span>android<span class=\"token operator\">=</span><span class=\"token string\">\"http://schemas.android.com/apk/res/android\"</span>\n    xmlns<span class=\"token operator\">:</span>app<span class=\"token operator\">=</span><span class=\"token string\">\"http://schemas.android.com/apk/res-auto\"</span>\n    xmlns<span class=\"token operator\">:</span>tools<span class=\"token operator\">=</span><span class=\"token string\">\"http://schemas.android.com/tools\"</span>\n    android<span class=\"token operator\">:</span>layout_width<span class=\"token operator\">=</span><span class=\"token string\">\"match_parent\"</span>\n    android<span class=\"token operator\">:</span>layout_height<span class=\"token operator\">=</span><span class=\"token string\">\"match_parent\"</span>\n    tools<span class=\"token operator\">:</span>context<span class=\"token operator\">=</span><span class=\"token string\">\".MainActivity\"</span><span class=\"token operator\">></span>\n\n    <span class=\"token operator\">&lt;</span>Button\n        android<span class=\"token operator\">:</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"@+id/btn_camera\"</span>\n        android<span class=\"token operator\">:</span>layout_width<span class=\"token operator\">=</span><span class=\"token string\">\"match_parent\"</span>\n        android<span class=\"token operator\">:</span>layout_height<span class=\"token operator\">=</span><span class=\"token string\">\"wrap_content\"</span>\n        android<span class=\"token operator\">:</span>text<span class=\"token operator\">=</span><span class=\"token string\">\"카메라 촬영\"</span>\n        app<span class=\"token operator\">:</span>layout_constraintBottom_toBottomOf<span class=\"token operator\">=</span><span class=\"token string\">\"parent\"</span>\n        app<span class=\"token operator\">:</span>layout_constraintEnd_toEndOf<span class=\"token operator\">=</span><span class=\"token string\">\"parent\"</span>\n        app<span class=\"token operator\">:</span>layout_constraintHorizontal_bias<span class=\"token operator\">=</span><span class=\"token string\">\"0.498\"</span>\n        app<span class=\"token operator\">:</span>layout_constraintStart_toStartOf<span class=\"token operator\">=</span><span class=\"token string\">\"parent\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n\n    <span class=\"token operator\">&lt;</span>ImageView\n        android<span class=\"token operator\">:</span>id<span class=\"token operator\">=</span><span class=\"token string\">\"@+id/iv_profile\"</span>\n        android<span class=\"token operator\">:</span>layout_width<span class=\"token operator\">=</span><span class=\"token string\">\"wrap_content\"</span>\n        android<span class=\"token operator\">:</span>layout_height<span class=\"token operator\">=</span><span class=\"token string\">\"wrap_content\"</span>\n        app<span class=\"token operator\">:</span>layout_constraintBottom_toTopOf<span class=\"token operator\">=</span><span class=\"token string\">\"@+id/btn_camera\"</span>\n        app<span class=\"token operator\">:</span>layout_constraintEnd_toEndOf<span class=\"token operator\">=</span><span class=\"token string\">\"parent\"</span>\n        app<span class=\"token operator\">:</span>layout_constraintStart_toStartOf<span class=\"token operator\">=</span><span class=\"token string\">\"parent\"</span>\n        app<span class=\"token operator\">:</span>layout_constraintTop_toTopOf<span class=\"token operator\">=</span><span class=\"token string\">\"parent\"</span>\n        android<span class=\"token operator\">:</span>src<span class=\"token operator\">=</span><span class=\"token string\">\"@drawable/ic_launcher_background\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>androidx<span class=\"token punctuation\">.</span>constraintlayout<span class=\"token punctuation\">.</span>widget<span class=\"token punctuation\">.</span>ConstraintLayout<span class=\"token operator\">></span></code></pre></div>\n<!-- ### 결과물\n<div style=\"display : flex; justify-content : space-between;\">\n  <img style=\"display : inlneblock; width : 40%\" src=\"https://github.com/sangmin802/Kotlin_Android/blob/master/HongLecture/Navigation/app/src/main/res/drawable-v24/nav1.PNG?raw=true\" alt=\"result1\">\n  <img style=\"display : inlneblock; width : 40%\" src=\"https://github.com/sangmin802/Kotlin_Android/blob/master/HongLecture/Navigation/app/src/main/res/drawable-v24/nav2.PNG?raw=true\" alt=\"result2\">\n</div> -->\n<h3 id=\"결과물\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EA%B3%BC%EB%AC%BC\" aria-label=\"결과물 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결과물</h3>\n<div style=\"text-align : center;\">\n  <img src=\"https://github.com/sangmin802/Kotlin_Android/blob/master/HongLecture/Camera/app/src/main/res/drawable-v24/camera.PNG?raw=true\" alt=\"result1\">\n</div>\n<h2 id=\"참조\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EC%A1%B0\" aria-label=\"참조 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참조</h2>\n<p><a href=\"https://www.youtube.com/watch?v=inprJiLDUIU&#x26;list=PLC51MBz7PMywN2GJ53aF0UO5fnHGjW35a&#x26;index=9\">홍스로이드 Kotlin Camera</a></p>","frontmatter":{"title":"Kotlin Camera","date":"September 22, 2020"}}},"pageContext":{"slug":"/Study/Android/kotlin_09_camera/","previous":{"fields":{"slug":"/Study/Android/kotlin_08_webview/"},"frontmatter":{"title":"Kotlin WebView","category":"Study","draft":false,"tag":"Android"}},"next":{"fields":{"slug":"/Study/Android/kotlin_10_recyclerview/"},"frontmatter":{"title":"Kotlin Recycler View","category":"Study","draft":false,"tag":"Android"}}}},"staticQueryHashes":["3128451518","3665928227","479399088"]}