{"componentChunkName":"component---src-templates-blog-post-js","path":"/Study/Think/view-transition/","result":{"data":{"site":{"siteMetadata":{"title":"SangMin 개발 이야기","author":"SangMin","siteUrl":"https://sangmin802.github.io","comment":{"utterances":"sangmin802/sangmin802.github.io"}}},"markdownRemark":{"id":"8e4adbb8-2f1d-5cc4-8ad9-aeadbc6a9a24","excerpt":"view transition View Transition spa에서 path가 변경되어 페이지가 전환될 경우, 단조롭지않게 애니메이션을 부여하기 위해서 script로 많은 코드를 작성해야했지만, 고맙게도 document api가 제공되고있다. 어떻게 사용하는지가 아닌.. 적용하면서 알게된것들? 추측하게된것들이 있어 정리해보고자 한다. 되돌아보니 모두 레이어와 관련되긴 했네.. 쌓임스택 뭔가 다른데…? 일단 많이 간소화되긴 하였지만.. 위처럼 path가 변경될 때, 같이 바뀔 content…","html":"<h2 id=\"view-transition\" style=\"position:relative;\"><a href=\"#view-transition\" aria-label=\"view transition permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>view transition</h2>\n<ul>\n<li><a href=\"https://developer.chrome.com/docs/web-platform/view-transitions/same-document?hl=ko\">View Transition</a></li>\n</ul>\n<p>spa에서 path가 변경되어 페이지가 전환될 경우, 단조롭지않게 애니메이션을 부여하기 위해서 script로 많은 코드를 작성해야했지만, 고맙게도 document api가 제공되고있다.</p>\n<p>어떻게 사용하는지가 아닌.. 적용하면서 알게된것들? 추측하게된것들이 있어 정리해보고자 한다.</p>\n<blockquote>\n<p>되돌아보니 모두 레이어와 관련되긴 했네..</p>\n</blockquote>\n<h3 id=\"쌓임스택-뭔가-다른데\" style=\"position:relative;\"><a href=\"#%EC%8C%93%EC%9E%84%EC%8A%A4%ED%83%9D-%EB%AD%94%EA%B0%80-%EB%8B%A4%EB%A5%B8%EB%8D%B0\" aria-label=\"쌓임스택 뭔가 다른데 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>쌓임스택 뭔가 다른데…?</h3>\n<div style=\"margin : 0 auto; text-align : center\">\n  <img src=\"/img/2025/04/11/view-transition.gif\" alt=\"view-transition\">\n</div>\n<p>일단 많이 간소화되긴 하였지만.. 위처럼 path가 변경될 때, 같이 바뀔 content영역에만 애니메이션을 부여하고, gnb, lnb, footer는 이 애니메이션의 영향을 받지 않도록 처리를 해둔 상태이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">.</span>content <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 애니메이션 적용되어있음</span>\n\tview<span class=\"token operator\">-</span>transition<span class=\"token operator\">-</span>name<span class=\"token operator\">:</span> content<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 나머지는 영향을 주지도, 받지도 않도록 그냥 껍데기</span>\n<span class=\"token punctuation\">.</span>gnb <span class=\"token punctuation\">{</span>\n\tview<span class=\"token operator\">-</span>transition<span class=\"token operator\">-</span>name<span class=\"token operator\">:</span> gnb<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">.</span>lnb <span class=\"token punctuation\">{</span>\n\tview<span class=\"token operator\">-</span>transition<span class=\"token operator\">-</span>name<span class=\"token operator\">:</span> lnb<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">.</span>footer <span class=\"token punctuation\">{</span>\n\tview<span class=\"token operator\">-</span>transition<span class=\"token operator\">-</span>name<span class=\"token operator\">:</span> footer<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>각 요소들은 내부에 써져있는대로 position, z-index가 부여된 상태이다.</p>\n<p>이 상태에서, content에 position: fixed인 요소를 하나 띄워보았다.</p>\n<div style=\"margin : 0 auto; text-align : center\">\n  <img src=\"/img/2025/04/11/footer-up.png?raw=true\" alt=\"footer-up\">\n</div>\n뭐지..?\n<p>content, footer는 모두 position: static한 값으로 쌓임스택에는 관련이 없었다. 따라서 생성된 fixed 요소가 999의 z-index를 가지고있어서 footer보다 높은 위치에 보여질것이라고 생각했으나 달랐다..</p>\n<div style=\"margin : 0 auto; text-align : center\">\n  <img src=\"/img/2025/04/11/fixed-up.png?raw=true\" alt=\"fixed-up\">\n</div>\n기가막히게 footer에 view-transition-name 이 스타일속성을 제거해주면 기대했던대로 보여진다.\n<p>위 두가지의 조건에서 요소들이 어떤식으로 레이어가 쌓여있는지 확인해보기로 했다.</p>\n<div style=\"margin : 0 auto; text-align : center\">\n  <img src=\"/img/2025/04/11/fixed-up-layer.png?raw=true\" alt=\"fixed-up-layer\">\n</div>\n<blockquote>\n<p>footer에 view-transition-name 속성이 적용되지 않았을 때</p>\n</blockquote>\n<div style=\"margin : 0 auto; text-align : center\">\n  <img src=\"/img/2025/04/11/footer-up-layer.png?raw=true\" alt=\"footer-up-layer\">\n</div>\n<blockquote>\n<p>footer에 view-transition-name 속성이 적용되어있을 때</p>\n</blockquote>\n<p>view-transition-name 속성이 적용되었을 경우, 마치 position: static이 아닌 다른 값이 부여된것 마냥 기본 상태와 다르게 레이어를 띄워높고있었다.</p>\n<blockquote>\n<p>내가 문서상 어떤 부분을 놓친건가.. 이런내용은 못봤던것 같은데..</p>\n</blockquote>\n<p>content영역에 z-index값을 1만 주더라도 자식위치에 있는 저 fixed 요소가 더 높은 쌓임스택을 갖게되면서 문제가 해결되긴 하나, 저 방식을 써야했던 이유가 모달이였기 때문에 그냥 app에서 독립적일 수 있도록 외부 root로 빼주기로 했다.</p>\n<h3 id=\"전환-시-화면이-잠깐-깜빡이는데\" style=\"position:relative;\"><a href=\"#%EC%A0%84%ED%99%98-%EC%8B%9C-%ED%99%94%EB%A9%B4%EC%9D%B4-%EC%9E%A0%EA%B9%90-%EA%B9%9C%EB%B9%A1%EC%9D%B4%EB%8A%94%EB%8D%B0\" aria-label=\"전환 시 화면이 잠깐 깜빡이는데 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>전환 시 화면이 잠깐 깜빡이는데..?</h3>\n<p>페이지 전환 시 컨펌이나 외부 root의 ui가 보여지고 전환이 되는 경우가 있다.</p>\n<div style=\"margin : 0 auto; text-align : center\">\n  <img src=\"/img/2025/04/11/navigate-ui-error.gif\" alt=\"navigate-ui-error\">\n</div>\n<p>영상을 보면 아주 잠깐 화면 전환 시, view-transition-name 속성을 가지고있는 요소들이 그렇지 않은 요소인 dimmed영역 위에 보여지면서 깜빡이는 느낌을 준다.</p>\n<p>이 전환을 개발자도구로 천천히 진행시키며 그 지점을 딱 찍어보면</p>\n<div style=\"margin : 0 auto; text-align : center\">\n  <img src=\"/img/2025/04/11/navigate-ui-error-capture.png?raw=true\" alt=\"navigate-ui-error-capture\">\n</div>\n<p>얘는 이 api의 특징임이기에 어렵지 않게 확인할 수 있었는데</p>\n<div style=\"margin : 0 auto; text-align : center\">\n  <img src=\"/img/2025/04/11/navigate-ui-error-element.png?raw=true\" alt=\"navigate-ui-error-element\">\n</div>\n<p>전환이 발생했을 때, view-transition-name 속성을 가지고있는 요소들을 캡쳐하여 이전과 이후 사진(사진 이라고해야하나..?)을 가지고 애니메이션을 보여주는 과정에서</p>\n<div style=\"margin : 0 auto; text-align : center\">\n  <img src=\"/img/2025/04/11/navigate-ui-error-layer.png?raw=true\" alt=\"navigate-ui-error-layer\">\n</div>\n<p>이렇게 위의 group, image-pair, old, new 모두 레이어가 잠시 활성화되는것을 볼 수 있다.\n레이어 위치를 보면 gnb, footer, content, lnb 모두 있는걸 볼 수 있다.</p>\n<p>저기 잘 보면 이 레이어들 아래에 dimmed 컨펌이 껴있음..</p>\n<p>잘은 모르겠으나.. 이 순서를 계산하는것은 지나치게 큰 비용이 든다는것 같다..</p>\n<p>외부 root를 가지고 ui를 구성하는것들도 하나의 root로 묶고 위 스타일을 주어 동일한 조건을 가지도록 변경해주었다..</p>\n<p>단순하게 생각했으나, 예상하지 못한것들이 꽤나 많았던..</p>","frontmatter":{"title":"View transition을 적용하며 겪은 이슈(?)","date":"April 11, 2025"}}},"pageContext":{"slug":"/Study/Think/view-transition/","previous":{"fields":{"slug":"/Study/Think/react-forget/"},"frontmatter":{"title":"React Forget 과거부터 지금까지","category":"Study","draft":false,"tag":"Think"}},"next":null}},"staticQueryHashes":["1162990174","1854831582","2054357557","3128451518"],"slicesMap":{}}