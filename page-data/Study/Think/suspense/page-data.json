{"componentChunkName":"component---src-templates-blog-post-js","path":"/Study/Think/suspense/","result":{"data":{"site":{"siteMetadata":{"title":"SangMin ê°œë°œ ì´ì•¼ê¸°","author":"SangMin","siteUrl":"https://sangmin802.github.io","comment":{"disqusShortName":"","utterances":"sangmin802/sangmin802.github.io"},"sponsor":{"buyMeACoffeeId":"jbee"}}},"markdownRemark":{"id":"0dc8c982-8fa2-5f92-9e96-89fd91d45356","excerpt":"ì´ì „ì— ë¥¼ ì‚¬ìš©í•˜ì—¬, ë¹„ë™ê¸° ì‘ì—…ì„ í†µí•´ ì–»ì€ ë°ì´í„°ë¥¼ ìºì‹±í•˜ê³ , ì§€ì •í•œ ì‹œê°„ì— ë”°ë¼ ìµœì‹  ì—¬ë¶€ë¥¼ íŒŒì•…í•˜ê³  ì—…ë°ì´íŠ¸í•˜ì—¬ ì‚¬ìš©ìì—ê²Œ ì¢‹ì€ ìœ ì €ê²½í—˜ì„ ì¤„ ìˆ˜ ìˆë„ë¡ í”„ë¡œê·¸ë˜ë°ì„ í•˜ì˜€ë‹¤. ì´ë²ˆì—ëŠ” ë¹„ë™ê¸°ì‘ì—…ì— ë§ˆì°¬ê°€ì§€ë¡œ ìì£¼ ì‚¬ìš©í•´ì™”ë˜ ê³¼ ê°™ì€ ìƒíƒœì¼ ë•Œì˜ ê´€ë¦¬ë¥¼ í•´ë³´ë ¤ê³  í•œë‹¤. ğŸœ React Suspenseâ€¦","html":"<p>ì´ì „ì— <code class=\"language-text\">React-Query</code>ë¥¼ ì‚¬ìš©í•˜ì—¬, ë¹„ë™ê¸° ì‘ì—…ì„ í†µí•´ ì–»ì€ ë°ì´í„°ë¥¼ ìºì‹±í•˜ê³ , ì§€ì •í•œ ì‹œê°„ì— ë”°ë¼ ìµœì‹  ì—¬ë¶€ë¥¼ íŒŒì•…í•˜ê³  ì—…ë°ì´íŠ¸í•˜ì—¬ ì‚¬ìš©ìì—ê²Œ ì¢‹ì€ ìœ ì €ê²½í—˜ì„ ì¤„ ìˆ˜ ìˆë„ë¡ í”„ë¡œê·¸ë˜ë°ì„ í•˜ì˜€ë‹¤.</p>\n<p>ì´ë²ˆì—ëŠ” ë¹„ë™ê¸°ì‘ì—…ì— ë§ˆì°¬ê°€ì§€ë¡œ ìì£¼ ì‚¬ìš©í•´ì™”ë˜ <code class=\"language-text\">isLoading</code>ê³¼ ê°™ì€ <code class=\"language-text\">Pending</code>ìƒíƒœì¼ ë•Œì˜ ê´€ë¦¬ë¥¼ í•´ë³´ë ¤ê³  í•œë‹¤.</p>\n<h2 id=\"-react-suspense\" style=\"position:relative;\"><a href=\"#-react-suspense\" aria-label=\" react suspense permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸœ React Suspense</h2>\n<p>ì´ì „ì— <code class=\"language-text\">React-Query</code>ì˜ <code class=\"language-text\">suspense</code> ì†ì„±ì„ í†µí•´ ë°ì´í„°ê°€ ë°›ì•„ì§€ì§€ ì•Šì•˜ë‹¤ë©´ ì´í›„ ë Œë”ë§ì„ ì¤‘ì§€ì‹œì¼œì£¼ê¸° ê¹Œì§€ëŠ” ì„±ê³µí•˜ì˜€ë‹¤. í•˜ì§€ë§Œ, ê·¸ ì¤‘ì§€ìƒíƒœì¼ ë•Œì˜ ë Œë”ë§ì— ëŒ€í•´ì„œëŠ” í•´ê²°í•˜ì§€ ëª»í–ˆì—ˆë‹¤.</p>\n<p><code class=\"language-text\">React</code>ì—ì„œëŠ” <code class=\"language-text\">Suspense</code>ë¼ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ”ë°, í•´ë‹¹ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì—¬ <code class=\"language-text\">ê¸°ë‹¤ë¦¬ê¸°</code> ë¼ëŠ” í‚¤ì›Œë“œë¥¼ ê°–ê³ ìˆëŠ” ìƒí™©ì— ì‚¬ìš©ì„ í•  ìˆ˜ ìˆë‹¤.</p>\n<p>ëŒ€í‘œì ìœ¼ë¡œ, ë¹„ë™ê¸°ì‘ì—…ì„ ì§„í–‰í•˜ë©´ì„œ ë°œìƒí•˜ëŠ” ë¡œë”©ì‹œê°„ì„ <strong>ê¸°ë‹¤ë¦¬ë©´ì„œ</strong> ì²˜ë¦¬í•  ì‘ì—…ë“¤ì„ ëŒ€ì²´í•˜ëŠ” ê²ƒì´ë‹¤.</p>\n<p>ì—„ë°€íˆ ë”°ì§€ë©´, íŠ¹ì • ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì— ë°ì´í„°ê°€ ì¤€ë¹„ë˜ì§€ ì•Šì•˜ìŒì„ ì•Œë¦¬ëŠ” ì—­í• ì„ ìˆ˜í–‰í•œë‹¤.</p>\n<h3 id=\"ğŸ¥˜-usestateë¥¼-í†µí•œ-loading\" style=\"position:relative;\"><a href=\"#%F0%9F%A5%98-usestate%EB%A5%BC-%ED%86%B5%ED%95%9C-loading\" aria-label=\"ğŸ¥˜ usestateë¥¼ í†µí•œ loading permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ¥˜ useStateë¥¼ í†µí•œ loading</h3>\n<p>ì´ì „ê¹Œì§€ëŠ” ëŠ˜ ì´ë ‡ê²Œ ë¹„ë™ê¸° ì‘ì—…ì„ ìˆ˜í–‰í•˜ê¸° ì´ì „ì— <code class=\"language-text\">loading</code>ì´ë¼ëŠ” ìƒíƒœê°’ì„ ë³€ê²½í•˜ì—¬ <code class=\"language-text\">UI</code>ë¥¼ ë„ì›Œì™”ì—ˆë‹¤</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> fetchData <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setLoading</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">setState</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span>\n    <span class=\"token function\">setLoading</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>setLoading<span class=\"token punctuation\">,</span> callback<span class=\"token punctuation\">,</span> setState<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"-reactsuspenseë¥¼-í†µí•œ-loading\" style=\"position:relative;\"><a href=\"#-reactsuspense%EB%A5%BC-%ED%86%B5%ED%95%9C-loading\" aria-label=\" reactsuspenseë¥¼ í†µí•œ loading permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ² React.Suspenseë¥¼ í†µí•œ loading</h3>\n<p>ë¹„ë™ê¸°ë¡œ ì‘ì—…ë˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ <code class=\"language-text\">Suspense</code>ë¡œ ê°ì‹¸ê³ , ë¡œë”© ë•Œ ë³´ì—¬ì¤„ í™”ë©´ì„ <code class=\"language-text\">fallback</code> ì†ì„±ìœ¼ë¡œ ì „ë‹¬í•œë‹¤.</p>\n<p>ë¡œë”©í™”ë©´ì„ ìƒì„±í•˜ê¸° ìœ„í•œ <code class=\"language-text\">useState</code>ì™€ ê°™ì€ <code class=\"language-text\">hook</code>ë“¤ì´ ìƒì„±ë  í•„ìš”ê°€ ì—†ì–´ì¡Œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>Suspense fallback<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token operator\">&lt;</span>LoadingSpinner <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>Event <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Suspense<span class=\"token operator\">></span></code></pre></div>\n<blockquote>\n<p>21-11-30 ì—…ë°ì´íŠ¸</p>\n</blockquote>\n<p>ì–´ë–»ê²Œ ê°€ëŠ¥í•œê²ƒì¼ê¹Œ?</p>\n<p><code class=\"language-text\">React</code>ì˜ <code class=\"language-text\">repository</code>ì— <code class=\"language-text\">Suspense</code>ì— ëŒ€í•œ ì„¸ì„¸í•œ ë¡œì§ì„ ì°¾ì„ ìˆ˜ëŠ” ì—†ì—ˆë‹¤.</p>\n<p>í•˜ì§€ë§Œ, <code class=\"language-text\">Suspense</code>ë¥¼ ì†Œê°œí•˜ëŠ” í•­ëª©ì—ì„œ í•œê°€ì§€ íŠ¹ì§•ì„ í™•ì¸í•  ìˆ˜ ìˆëŠ”ê²ƒì´ <code class=\"language-text\">getDerivedStateFromError</code> ë¼ëŠ” ìƒëª…ì£¼ê¸°ì´ë‹¤.</p>\n<p>í•´ë‹¹ ìƒëª…ì£¼ê¸°ë¥¼ ê°–ê³ ìˆëŠ” ì»´í¬ë„ŒíŠ¸ í•˜ìœ„ì—ì„œ ë°œìƒí•œ ì—ëŸ¬ë¥¼ í¬ì°©í•˜ê³ , ë‹¤ì‹œ <code class=\"language-text\">render</code>ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.</p>\n<p>ê·¸ë¦¬ê³  ì—¬ëŸ¬ í…ŒìŠ¤íŠ¸ë¥¼ í•´ë³¸ ê²°ê³¼ ë‹¨ í•œê°€ì§€ì˜ ê°’ì—ëŠ” ë‹¤ë¥¸ ê²°ê³¼ë¥¼ ë³´ì˜€ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n\n<span class=\"token keyword\">let</span> data <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span>\n<span class=\"token keyword\">let</span> resolve <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span>\n\n<span class=\"token keyword\">const</span> promise <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  resolve <span class=\"token operator\">=</span> res\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  data <span class=\"token operator\">=</span> <span class=\"token string\">'success data'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token keyword\">async</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>data<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throw</span> promise\n  <span class=\"token keyword\">return</span> data\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"App\"</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>React<span class=\"token punctuation\">.</span>Suspense\n        fallback<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>\n          <span class=\"token operator\">&lt;</span>button\n            onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n              resolve<span class=\"token operator\">?.</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n          <span class=\"token operator\">></span>\n            resolve<span class=\"token operator\">!</span>\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>InnerApp <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>React<span class=\"token punctuation\">.</span>Suspense<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">InnerApp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<blockquote>\n<p><code class=\"language-text\">CodeSandbox</code>ì—ì„œ ì‹¤í–‰ ê°€ëŠ¥</p>\n</blockquote>\n<p>ì„ì‹œë¡œ ì‘ì„±í•´ë³¸ ì½”ë“œì´ê¸´ í•˜ì§€ë§Œ ìœ„ì²˜ëŸ¼ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ <code class=\"language-text\">throw</code>ì™€ ê°™ì´ ì´í›„ê°€ <strong>ì¤‘ë‹¨</strong>ë  ë•Œ, ê°’ìœ¼ë¡œ <code class=\"language-text\">Promise</code>ê°ì²´ê°€ ì „ë‹¬ëœë‹¤ë©´ <code class=\"language-text\">fallback</code> ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§ í•˜ì˜€ë‹¤.</p>\n<p>í•µì‹¬ì€ <code class=\"language-text\">throw</code>ë¼ëŠ” <strong>ì¤‘ë‹¨</strong>ê³¼, ì™„ë£Œë˜ì§€ ì•Šì€ <code class=\"language-text\">Promise</code> ê°ì²´ì¸ê²ƒ ê°™ë‹¤.</p>\n<p>ì¤‘ë‹¨ì´ ë˜ì—ˆê¸° ë•Œë¬¸ì— í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•˜ëŠ”ê²ƒì´ ì™„ë£Œë˜ì§€ ì•ŠëŠ” ìƒíƒœë¥¼ ìœ ì§€í•œë‹¤.</p>\n<p>ë§ˆì¹˜, <code class=\"language-text\">resolve</code>ê°€ ì•„ì§ í˜¸ì¶œë˜ì§€ ì•Šì€ <code class=\"language-text\">await</code> ì´í›„ì˜ ë¡œì§ í˜¹ì€ <code class=\"language-text\">.then</code>ì˜ ì½œë°±í•¨ìˆ˜ë¥¼ ë³´ëŠ”ê²ƒ ê°™ë‹¤.</p>\n<p>ì¤‘ë‹¨ì´ë¼ëŠ” ì˜ë¯¸ë¥¼ ë” ì‰½ê²Œ ì´í•´í• ìˆ˜ ìˆë„ë¡ ë³´ì—¬ì§€ëŠ”ê²ƒì´, ìœ„ì™€ ê°™ì´ <code class=\"language-text\">throw</code>ëœ ì»´í¬ë„ŒíŠ¸ëŠ” <code class=\"language-text\">useEffect</code>ì™€ ê°™ì´ <code class=\"language-text\">render</code>ê°€ ì™„ë£Œëœ ì´í›„ì— í˜¸ì¶œë˜ëŠ” ìƒëª…ì£¼ê¸°ê°€ í˜¸ì¶œë˜ì§€ ì•ŠëŠ”ë‹¤.</p>\n<blockquote>\n<p><code class=\"language-text\">mount</code> ë˜ì§€ ì•ŠëŠ”ìƒí™©</p>\n</blockquote>\n<p>ìœ„ì™€ ê°™ì´ ì‹¤í–‰ë  ìˆ˜ ìˆëŠ” ì¡°ê±´ì€, ì™¸ë¶€ì—ì„œ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ëŠ” ë¹„ë™ê¸°ë¡œì§ì´ ì¦‰ê°ì ìœ¼ë¡œ <code class=\"language-text\">Promise</code> ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ”ê²ƒì´ ì•„ë‹Œ í´ë¡œì €ë¥¼ í†µí•´ ìƒíƒœ ë³€ìˆ˜ë¥¼ ê°–ê³ ìˆëŠ” í•¨ìˆ˜ê°€ ë°˜í™˜ë˜ì–´ì•¼ í•˜ëŠ”ê²ƒ ê°™ë‹¤.</p>\n<blockquote>\n<p>ê³µì‹ë¬¸ì„œì—ë„ ê·¸ë ‡ê²Œ ì„¤ëª…ë˜ì–´ìˆìŒ!!</p>\n</blockquote>\n<p>ê·¸ë¦¬ê³ , ê·¸ëŸ¬í•œ ì¼ì„ ëŒ€ì‹ í•´ì£¼ëŠ”ê²ƒì´ ì•„ë˜ì— ì†Œê°œë  <code class=\"language-text\">React-Query</code>ì´ë‹¤.</p>\n<h2 id=\"-react-query--suspense\" style=\"position:relative;\"><a href=\"#-react-query--suspense\" aria-label=\" react query  suspense permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ£ React-Query + Suspense</h2>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> queryClient <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">QueryClient</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  defaultOptions<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    queries<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      retry<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n      suspense<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-text\">suspense</code>ì˜µì…˜ì´ í™œì„±í™” ëœ <code class=\"language-text\">query</code>ëŠ” ë¹„ë™ê¸° ì‘ì—…ì—ì„œ <code class=\"language-text\">pending</code>ìƒíƒœì¼ ê²½ìš° <code class=\"language-text\">React Suspense</code>ì— ë³´ë‚´ì§„ <code class=\"language-text\">fallback</code> ì»´í¬ë„ŒíŠ¸ë¥¼ í™”ë©´ì— ë„ìš°ê²Œëœë‹¤.</p>\n<h3 id=\"-ì‹¤ì œ-ì‚¬ìš©-ì˜ˆì‹œ\" style=\"position:relative;\"><a href=\"#-%EC%8B%A4%EC%A0%9C-%EC%82%AC%EC%9A%A9-%EC%98%88%EC%8B%9C\" aria-label=\" ì‹¤ì œ ì‚¬ìš© ì˜ˆì‹œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ± ì‹¤ì œ ì‚¬ìš© ì˜ˆì‹œ</h3>\n<p><code class=\"language-text\">Suspense</code>ë¡œ <code class=\"language-text\">suspense : true</code> ìƒíƒœì¸ <code class=\"language-text\">useQuery</code>ë¥¼ í¬í•¨í•œ ì»´í¬ë„ŒíŠ¸ë¥¼ ê°ì‹¸ì£¼ê³ , <code class=\"language-text\">fallback</code>ì†ì„±ìœ¼ë¡œ <code class=\"language-text\">pending</code>ë™ì•ˆ ë³´ì—¬ì§ˆ ì»´í¬ë„ŒíŠ¸ë¥¼ ë³´ë‚´ì¤€ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>Suspense fallback<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token operator\">&lt;</span>LoadingSpinner <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>Event <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Suspense<span class=\"token operator\">></span></code></pre></div>\n<p><code class=\"language-text\">Event</code>ì»´í¬ë„ŒíŠ¸ëŠ” <code class=\"language-text\">useQuery</code>ë¥¼ í†µí•´ ì´ë²¤íŠ¸ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ê²Œë˜ëŠ”ë°, <code class=\"language-text\">query</code>ì˜ íŠ¹ì„±ìƒ ë°ì´í„°ê°€ ì¡´ì¬í•˜ëŠ” ê²½ìš°ë§Œì„ ê³ ë ¤í•˜ê¸° ë•Œë¬¸ì— ë°ì´í„°ê°€ ë°›ì•„ì§€ê¸° ì „ ê¹Œì§€ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ ë˜ì§€ ì•ŠëŠ”ë‹¤.</p>\n<p>ì¦‰, ì—¬ê¸°ì„œ ë¹„ë™ê¸°ì‘ì—…ì´ <code class=\"language-text\">pending</code>ìƒíƒœì¼ ë•Œ, <code class=\"language-text\">React-Query</code>ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ë‹¤ë©´, <code class=\"language-text\">data</code>ê°€ ì¡´ì¬í•˜ì§€ ì•Šë‹¤ëŠ” ì—ëŸ¬ê°€ ëœ¨ê±°ë‚˜ ë¡œë”©ì—¬ë¶€ë¥¼ íŒŒì•…í•  ìˆ˜ ì—†ëŠ” ë¹„ì–´ìˆëŠ” í™”ë©´ì´ ë–´ì—ˆì„ ê²ƒì´ë‹¤.</p>\n<p>ì–´ë–»ê²Œ ë‹¬ë¼ì§€ëŠ”ì§€ í™•ì¸í•´ë³´ì</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Event</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> eventData <span class=\"token operator\">=</span> <span class=\"token function\">useQuery</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fetchEventData'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token constant\">API</span><span class=\"token punctuation\">.</span><span class=\"token function\">getEventData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// í™”ë©´ì´ í¬ì»¤ì‹±ë  ë•Œ ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ ë°›ëŠ”ê¸°ëŠ¥ì€ false</span>\n    <span class=\"token comment\">// ê°œì¸ ì·¨í–¥..</span>\n    refetchOnWindowFocus<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>Styled<span class=\"token punctuation\">.</span>Content type<span class=\"token operator\">=</span><span class=\"token string\">\"event\"</span><span class=\"token operator\">></span>\n      <span class=\"token punctuation\">{</span>eventData<span class=\"token punctuation\">.</span>events<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span>Styled<span class=\"token punctuation\">.</span>Event key<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">event</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>index<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>Event event<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>event<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Styled<span class=\"token punctuation\">.</span>Event<span class=\"token operator\">></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Styled<span class=\"token punctuation\">.</span>Content<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div style=\"text-align : center\">\n  <img src=\"/img/2021/07/07/2.gif?raw=true\" alt=\"2\">\n</div>\n<p>ë°ì´í„°ê°€ <code class=\"language-text\">fetching</code>ì¤‘ì¼ ë•Œì—ëŠ”, <code class=\"language-text\">Suspense</code>ë¡œ ë³´ë‚´ì§„ <code class=\"language-text\">fallback</code> ì»´í¬ë„ŒíŠ¸ì¸ <code class=\"language-text\">LoadingSpinner</code>ê°€ ë…¸ì¶œë˜ë‹¤ê°€, <code class=\"language-text\">fetching</code>ì´ ì™„ë£Œë˜ê³  <code class=\"language-text\">fresh</code>ìƒíƒœì¼ ë•Œì—ëŠ”, <code class=\"language-text\">Event</code>ì»´í¬ë„ŒíŠ¸ë¥¼ ì •ìƒì ìœ¼ë¡œ ë Œë”ë§í•œë‹¤.</p>\n<h2 id=\"-ì—ëŸ¬-í•¸ë“¤ë§ê³¼-ë¶ˆì™„ì „í•¨\" style=\"position:relative;\"><a href=\"#-%EC%97%90%EB%9F%AC-%ED%95%B8%EB%93%A4%EB%A7%81%EA%B3%BC-%EB%B6%88%EC%99%84%EC%A0%84%ED%95%A8\" aria-label=\" ì—ëŸ¬ í•¸ë“¤ë§ê³¼ ë¶ˆì™„ì „í•¨ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ğŸ› ì—ëŸ¬ í•¸ë“¤ë§ê³¼ ë¶ˆì™„ì „í•¨</h2>\n<p><code class=\"language-text\">React</code>ì˜ <code class=\"language-text\">Suspense</code>ì™€ <code class=\"language-text\">React-Query</code>ë¥¼ ì ì ˆíˆ ì‚¬ìš©í•˜ì—¬, ë°ì´í„°ì˜ ë¡œë”© ìƒíƒœë¥¼ ê°„ë‹¨í•˜ê²Œ êµ¬í˜„í•´ë‚¼ ìˆ˜ ìˆì—ˆë‹¤.</p>\n<p>í•˜ì§€ë§Œ ì•„ì§ ë¹„ë™ê¸° ì‘ì—…ì—ì„œ ë°œìƒí•˜ëŠ” ì—ëŸ¬ì— ëŒ€í•œ í•¸ë“¤ë§ì— ëŒ€í•´ì„œëŠ” í•´ê²°í•˜ì§€ ëª»ë‹¤.</p>\n<p>ë˜í•œ, <code class=\"language-text\">React</code>, <code class=\"language-text\">React-Query</code> ëª¨ë‘ <code class=\"language-text\">suspense</code>ê¸°ëŠ¥ì— ìˆì–´ì„œëŠ” ì•„ì§ ì‹¤í—˜ë‹¨ê³„ë¼ì„œ ë¶ˆì™„ì „í•œ ìƒíƒœë¼ê³  í•œë‹¤.</p>\n<p>ì‹¤ì œë¡œ, ì ìš©í•œ í”„ë¡œì íŠ¸ì—ì„œë„ ë¹„ìŠ·í•œ ì—ëŸ¬ê°€ ìˆì—ˆëŠ”ë° ì—ëŸ¬ í•¸ë“¤ë§, ê·¸ë¦¬ê³  ë°œìƒí–ˆë˜ ì˜¤ë¥˜ì— ìˆì–´ì„œëŠ” ë‹¤ìŒì— ë‹¤ì‹œ ë³µê¸°í•´ë³´ì.</p>","frontmatter":{"title":"âš› React.Suspenseë¥¼ ì‚¬ìš©í•˜ì—¬ ë¹„ë™ê¸° Pending ê´€ë¦¬í•˜ê¸°","date":"July 07, 2021"}}},"pageContext":{"slug":"/Study/Think/suspense/","previous":{"fields":{"slug":"/Study/Think/react-query/"},"frontmatter":{"title":"âš› React-Queryë¥¼ ì‚¬ìš©í•˜ì—¬ íš¨ìœ¨ì ì¸ ë¹„ë™ê¸° ì²˜ë¦¬í•˜ê¸°","category":"Study","draft":false,"tag":"Think"}},"next":{"fields":{"slug":"/Study/Think/error boundary/"},"frontmatter":{"title":"âš› ErrorBoundaryì™€ ë¹„ë™ê¸° ì—ëŸ¬ í•¸ë“¤ë§","category":"Study","draft":false,"tag":"Think"}}}},"staticQueryHashes":["3128451518","3665928227","479399088","479399088"]}