---
title : "Next.js Webpack"
date : 2021-02-01 00:00:00
category : "Study"
draft : false
tag : "Next.js"
--- 

λ€λ¶€λ¶„μ ν”„λ μ„μ›ν¬λ“¤μ€ νΈλ¦¬ν• λ°°ν¬λ¥Ό μ„ν•΄, `Webpack`νμΌμ„ μ•μ•„μ„ λ§λ“¤μ–΄μ¤€λ‹¤.

λ”°λΌμ„, κ°„λ‹¨ν• μ»¤λ§¨λ“λ¥Ό ν†µν•΄ λΉλ“νμΌμ„ λ§λ“¤ μ μλ”λ°
> μ΄μ „μ— `Vanila JS`, `Node.js`,` Mysql`λ΅ μ„λ²„, `DB`λ¶€ν„°, `Webpack` λΉλ“ν™κ²½κΉμ§€ λ§λ“¤μ—λ μƒκ°μ„ ν•΄λ³΄λ©΄ μ°Έ νΈν•κΈ΄ ν•¨..

`Next.js`λν• κ·Έλ¬ν• κΈ°λ¥μ„ μ κ³µν•λ‹¤.

## λ¬Έμ λ°μƒ π΅
`loa-hands`μ•±μ„ `Next.js`λ΅ κ°λ°ν•΄λ³΄λ” κ³Όμ •μ—μ„, `Home Route`λ” λ¨λ“  μ‚¬μ©μμ—κ² κ³µν†µλ μ •λ³΄λ¥Ό λ³΄μ—¬μ£ΌκΈ°λ•λ¬Έμ—, `getStaticProps`λ©”μ†λ“λ¥Ό ν†µν•΄ μ •μ  `pre-rendering`μ„ μ‚¬μ©ν•κΈ°λ΅ ν–λ‹¤.

ν•΄λ‹Ή μ•±μ€ λ΅μ¤νΈμ•„ν¬ κ³µμ‹ μ‚¬μ΄νΈ μ „ν¬μ •λ³΄μ‹¤μ— μƒμ„±λ λ”μ„ κ°€μ Έμ™€μ„ λ°μ΄ν„°λ¥Ό μ¬κ°€κ³µν•κΈ° λ•λ¬Έμ—, `DOMParser` APIλ¥Ό μ‚¬μ©ν•λ”λ°, ν•΄λ‹Ή APIκ°€ μ΅΄μ¬ν•μ§€ μ•λ”λ‹¤λ” μ—λ¬κ°€ λ°μƒν–λ‹¤
> λ‹Ήμ—°ν•κ²ƒμ΄, `DOMParser`λ” λ”μ΄ κµ¬μ„±λλ” ν΄λΌμ΄μ–ΈνΈ? μΈ΅μ—μ„ μ΅΄μ¬ν•λ” APIμ΄λΌκ³  μ•κ³ μμ–΄μ„ μ„λ²„μƒμ—μ„ μ‘λ™λλ” `getStaticProps`μ‹¤ν–‰μ‹μ—λ” ν•΄λ‹Ή APIκ°€ μ΅΄μ¬ν•  μ μ—†μ—λ‹¤.

λ„λ¬΄λ‚λ„ κ³ λ§™κ²λ„, `JSDOM`μ΄λΌλ” μ™Έλ¶€ λ¨λ“μ„ κ°€μ Έμ™€μ„ μ„λ²„μƒμ—μ„λ„ λ”μ„ μ΅°μ‘ν•  μ μλ„λ΅ ν•μ€λ”λ°

<div style="text-align : center">
  <img src="/img/2021/02/01/1.PNG?raw=true" alt="1">
</div>

**λ­μ•Ό?**

## λ‘λ²μ λ²λ“¤λ§
`Next.js`λ” κ°λ°μ¤‘μ—λ„ κ°€μƒμ μ„λ²„λ¥Ό ν†µν•΄ μ§„ν–‰λλ‹¤. λ”°λΌμ„, `npm run dev`λ©”μ†λ“κ°€ μ‹¤ν–‰λλ©΄ κ°€μƒμ μ„λ²„κ°€ μ‹¤ν–‰λκ³ , μ‘μ„±ν–λ νμΌλ“¤μ΄ λ²λ“¤λ§λμ–΄ ν™”λ©΄μ„ κ·Έλ ¤μ£Όλ” κ±Έλ΅ μ•κ³ μμ—λ‹¤.

**ν•μ§€λ§** μ•κ³ λ³΄λ‹ `Next.js`λ” ν΄λΌμ΄μ–ΈνΈμƒμ—μ„ ν•λ² μ„λ²„μ—μ„ ν•λ² μ΄ λ‘λ²μ λ²λ“¤λ§ κ³Όμ •μ„ κ°–λ”λ‹¤κ³  ν•λ‹¤. λ”°λΌμ„, `JSDOM`μ„ ν†µν•΄ μ„λ²„μ—μ„ λ”μ„ μ΅°μ‘ν•  μ μκ² λμ—μ§€λ§, ν΄λΌμ΄μ–ΈνΈλ‹¨ μ—μ„λ” `JSDOM`λ¨λ“μ΄ μ‚¬μ©ν•λ” μ™Έλ¶€ λ¨λ“λ“¤μ„ μ‹¤ν–‰μ‹ν‚¤μ§€ λ»ν•λ”κ²ƒμ΄μ€λ‹¤.

λ„λ¬΄ κ³ λ§™κ²λ„, `Next.js`λ” `webpack`λ©”μ†λ“λ¥Ό ν†µν•΄, `Webpack`νμΌμ„ μμ •ν•  μ μμ—λ”λ°

<div style="text-align : center">
  <img src="/img/2021/02/01/2.PNG?raw=true" alt="2">
</div>

ν•΄λ‹Ή λ©”μ†λ“λ¥Ό μ‚¬μ©ν•μ—¬ μ„λ²„ν™κ²½μ΄ μ•„λ‹κ²½μ°, ν•΄λ‹Ή λ…Έλ“λ“¤μ„ μ‚¬μ©ν•μ§€ μ•κ²ν•μ€κ³ , μ •μƒμ μΌλ΅ μ‘λ™λμ—λ‹¤.

## next-redux-wrapper
`Next.js`μ—μ„λ„ `redux`λ¥Ό μ‚¬μ©ν•  μ μλ”λ°, κΈ°μ΅΄ `React.js`μ™€λ” λ‹¤λ¥΄κ² ν•λ‚μ λ¨λ“μ΄ λ” ν•„μ”ν•λ‹¤. `next-redux-wrapper`

<div style="text-align : center">
  <img src="/img/2021/02/01/3.PNG?raw=true" alt="3">
</div>


`Next.js`λ” `SEO`μµμ ν™”λ¥Ό μ„ν• `pre-rendering`μ΄ κ°€λ¥ν• ν”„λ μ„μ›ν¬λ΅μ„ κ°λ°μμ ν•„μ”μ— λ”°λΌ νΉμ • λΌμ°νΈλ¥Ό μ„λ²„μ—μ„ λ―Έλ¦¬ μƒμ„±ν•κ² ν•  μ μλ‹¤. κ·Έλ ‡κ² λλ‹¤λ©΄, ν΄λΌμ΄μ–ΈνΈλ‹¨μ—μ„ νμ΄μ§€ λΌμ°ν…μ„ ν•  λ•λ§λ‹¤ μƒλ΅μ΄ νμ΄μ§€λ¥Ό λ°›μ•„μ¤λ©΄μ„ μƒλ΅μ΄ `Redux Store`λ¥Ό μƒμ„±ν•κ²λλ”λ°, μ΄λ• ν•„μ”ν• κ²ƒμ΄ `next-redux-wrapper`μ΄λ‹¤.
> `next-redux-wrapper`μ μ‚¬μ©λ²•μ€ ν•΄λ‹Ή κΉƒν—λΈμ£Όμ†μ— μ λ‚μ™€μλ‹¤.

μ΄ λ¨λ“μ„ μ‚¬μ©ν•΄μ•Όλ§ `getStaticProps`μ™€ κ°™μ΄ μ„λ²„μ—μ„ μ‹¤ν–‰λλ” λ©”μ†λ“ λ‚΄λ¶€μ—μ„λ„ `Redux Hook`μ„ μ‚¬μ©ν•  μ μλ‹¤.


<div style="text-align : center">
  <img src="/img/2021/02/01/4.PNG?raw=true" alt="4">
</div>

`Reducer`μ—μ„λ” κΈ°μ΅΄ `React.js`μ™€ λ‹¤λ¥΄κ² `HYDRATE`μ΄λΌλ” νƒ€μ…μ΄ μ¶”κ°€λλ”λ°, μ΄ κ³Όμ •μ—μ„ μ„λ²„μ—μ„ κ°€μ§€κ³ μλ” `store`μ •λ³΄μ™€ ν΄λΌμ΄μ–ΈνΈμ—μ„ κ°–κ³ μλ” `store`μ μ •λ³΄λ¥Ό ν•λ‚λ΅ ν•©μΉλ‹¤.

μ΄λ΅μΈν•΄, μ„μ—μ„μ μƒν™©μ„ ν•΄κ²°ν•μ—¬ μ™„μ„±ν• `pre-rendering`μ„ ν†µν•΄ λ°›μ€ λ°μ΄ν„°λ¥Ό ν΄λΌμ΄μ–ΈνΈμ—μ„ κ·Έλ€λ΅ μ‚¬μ©ν•  μ μλ‹¤.

<div style="text-align : center">
  <img src="/img/2021/02/01/5.PNG?raw=true" alt="5">
</div>

ν„°λ―Έλ„μ„ ν†µν•΄ ν•΄λ‹Ή κ³Όμ •μ„ μ§€μΌλ³΄λ©΄

<div style="text-align : center">
  <img src="/img/2021/02/01/6.PNG?raw=true" alt="6">
</div>

1. μ„λ²„μ—μ„ κΈ°λ³Έκ°’μΌλ΅ κµ¬μ„±λ `store`κ°€ μƒμ„±λκ³ 
3. μ„λ²„μ—μ„ `dispatch`λ©”μ†λ“λ¥Ό ν†µν•΄ `store`μ— λ³€ν™”λ¥Ό μ£Όκ²λλ‹¤.
> μ΄ λ•, λ³΄λ‚΄μ§€λ” μ •λ³΄λ“¤μ€ `JSON`ν•μ‹μ΄ μ•„λ‹λ©΄ μ—λ¬κ°€ λ°μƒν•λ”λΌ..
4. `App`μ„ κ°μ‹Έμ¤€ `wrapper`μ—μ„ μ„λ²„μ—μ„ μƒμ„±λ `store`λ¥Ό ν™•μΈν•λ”κ²ƒ κ°™λ‹¤.
> `wrapper`μ™€ κ΄€λ ¨λκ²ƒμ€ `next-redux-wrapper`μ κ³µμ‹ κΉƒν—λΈ λ””λ ‰ν† λ¦¬λ¥Ό κ°€λ³΄λ©΄ μ λ‚μ™€μλ‹¤.

μ΄ν›„, μ •μ νμΌλ΅ λΉλ“ν•΄λ³΄λ©΄ `index.html`μ— `pre-rendering`μ΄ μ λμ–΄μμμ„ ν™•μΈν•  μ μλ‹¤.



**μ•ΌνΈ!π¥³**